import java.util.Arrays;

class Transform{
  // global variables
  public static int h0, h1, h2, h3, h4, h5, h6, h7;
    
  public static void main(String[] args){
    String input = "hello world";
    String w1 = "01101111001000000111011101101111";
    // w[1] = (byte) Integer.parseInt(w1, 2);
    int n = Integer.parseInt(w1, 2);;
    System.out.println(Integer.toBinaryString(n));
    // System.out.println(Integer.toBinaryString(Integer.rotateRight(n, 7)));
    // System.out.println("11011110110111100100000011101110");
    // System.out.println(Integer.toBinaryString(Integer.rotateRight(n, 18)));
    // System.out.println("00011101110110111101101111001000");
    // System.out.println(Integer.toBinaryString(rightshift(n, 3)));

    int s0 = Integer.rotateRight(n, 7) ^ Integer.rotateRight(n, 18) ^ rightshift(n, 3);
    System.out.println(Integer.toBinaryString(s0).equals("11001110111000011001010111001011"));
    int[] w = new int[64];
    w[0] = Integer.parseInt("01101000011001010110110001101100", 2);
    w[1] = Integer.parseInt("01101111001000000111011101101111", 2);
    w[2] = Integer.parseInt("01110010011011000110010010000000", 2);
    w[15] = Integer.parseInt("00000000000000000000000001011000", 2);
    msgSchedule(w);
    String res = printBin(w);
    String result = 
            "01101000011001010110110001101100 01101111001000000111011101101111\n" +
            "01110010011011000110010010000000 00000000000000000000000000000000\n" + //
            "00000000000000000000000000000000 00000000000000000000000000000000\n" + //
            "00000000000000000000000000000000 00000000000000000000000000000000\n" + //
            "00000000000000000000000000000000 00000000000000000000000000000000\n" + //
            "00000000000000000000000000000000 00000000000000000000000000000000\n" + //
            "00000000000000000000000000000000 00000000000000000000000000000000\n" + //
            "00000000000000000000000000000000 00000000000000000000000001011000\n" + //
            "00110111010001110000001000110111 10000110110100001100000000110001\n" + //
            "11010011101111010001000100001011 01111000001111110100011110000010\n" + //
            "00101010100100000111110011101101 01001011001011110111110011001001\n" + //
            "00110001111000011001010001011101 10001001001101100100100101100100\n" + //
            "01111111011110100000011011011010 11000001011110011010100100111010\n" + //
            "10111011111010001111011001010101 00001100000110101110001111100110\n" + //
            "10110000111111100000110101111101 01011111011011100101010110010011\n" + //
            "00000000100010011001101101010010 00000111111100011100101010010100\n" + //
            "00111011010111111110010111010110 01101000011001010110001011100110\n" + //
            "11001000010011100000101010011110 00000110101011111001101100100101\n" + //
            "10010010111011110110010011010111 01100011111110010101111001011010\n" + //
            "11100011000101100110011111010111 10000100001110111101111000010110\n" + //
            "11101110111011001010100001011011 10100000010011111111001000100001\n" + //
            "11111001000110001010110110111000 00010100101010001001001000011001\n" + //
            "00010000100001000101001100011101 01100000100100111110000011001101\n" + //
            "10000011000000110101111111101001 11010101101011100111100100111000\n" + //
            "00111001001111110000010110101101 11111011010010110001101111101111\n" + //
            "11101011011101011111111100101001 01101010001101101001010100110100\n" + //
            "00100010111111001001110011011000 10101001011101000000110100101011\n" + //
            "01100000110011110011100010000101 11000100101011001001100000111010\n" + //
            "00010001010000101111110110101101 10110000101100000001110111011001\n" + //
            "10011000111100001100001101101111 01110010000101111011100000011110\n" + //
            "10100010110101000110011110011010 00000001000011111001100101111011\n" + //
            "11111100000101110100111100001010 11000010110000101110101100010110\n";
    System.out.println(res.equals(result));

    // Step 6 - Compression

    h0 = Integer.parseInt("01101010000010011110011001100111", 2);
    // h1 = Integer.parseInt("10111011011001111010111010000101", 2);
    h2 = Integer.parseInt("00111100011011101111001101110010", 2);
    // h3 = Integer.parseInt("10100101010011111111010100111010", 2);
    h4 = Integer.parseInt("01010001000011100101001001111111", 2);
    // h5 = Integer.parseInt("10011011000001010110100010001100", 2);
    h6 = Integer.parseInt("00011111100000111101100110101011", 2);
    h7 = Integer.parseInt("01011011111000001100110100011001", 2);

    h1 = (int) (3144134277L % (long) Math.pow(2, 32));
    h3 = (int) (2773480762L % (long) Math.pow(2, 32));
    h5 = (int) (2600822924L % (long) Math.pow(2, 32));

    compression();
  }

  public static int rightshift(int n, int d){
    return (n >>> d);
  }

  public static void msgSchedule(int[] w){
    for (int i = 16; i < 64; i++){
      int n = w[i-15];
      int s0 = Integer.rotateRight(n, 7) ^ Integer.rotateRight(n, 18) ^ rightshift(n, 3);
      n = w[i-2];
      int s1 = Integer.rotateRight(n, 17) ^ Integer.rotateRight(n, 19) ^ rightshift(n, 10);
      w[i] = w[i-16] + s0 + w[i-7] + s1;
    }
    // System.out.println(w[16]); // mod 2^32 ?
    // System.out.println(Integer.parseInt("00110111010001110000001000110111", 2));
  }

  public static void compression(){
    int a, b, c, d, e, f, g, h;
    a = h0;
    b = h1;
    c = h2;
    d = h3;
    e = h4; 
    f = h5;
    g = h6;
    h = h7;
    int s1 = Integer.rotateRight(e, 6) ^ Integer.rotateRight(e, 11) ^ Integer.rotateRight(e, 25);
    System.out.println(Integer.toBinaryString(s1));
  }

  public static String printBin(int[] w){
    String str = "";
    for (int i = 0; i < w.length; i++) {
      int num1 = w[i];
      i++;
      int num2 = w[i];
      String s1 = String.format("%" + 32 + "s", Integer.toBinaryString(num1)).replace(' ', '0');
      String s2 = String.format("%" + 32 + "s", Integer.toBinaryString(num2)).replace(' ', '0');
      // System.out.println(s1 + " " + s2);
      str += s1 + " " + s2 + "\n";
    }
    return str;
  }
}
